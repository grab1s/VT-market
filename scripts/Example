-- docs. rules, example:
-- https://vantality.github.io/

-- 1. создаём секцию
-- CreateSection автоматически подберет колонку во вкладке LUAU.
local UI = Vantality.CreateSection("Luau API example")

-- 2. параграфы (текст для инфы внутри секции)
UI:AddParagraph({
	Title = "Welcome to Vantality Luau API", -- жирный заголовок параграфа
	Content = "показывает весь функционал API. юзайте GetValue() и SetValue(), чтобы не плодить миллион локальных переменных." -- основной текст в параграфе (описание)
})

-- 3. текстовое поле (input)
local SpooferInput = UI:AddInput({
	Name = "Name Spoofer", -- название инпута
	PlaceholderText = "введите ник...", -- серый текст, который виден, пока поле ввода пустое
	Default = "grab1s", -- дефолтный текст при загрузке скрипта
	Callback = function(text) -- Callback вызывается, когда юзер нажимает Enter или кликает вне поля ввода
		print(">> новый ник для спуфера:", text)
	end
})

-- 4. переключатель (Toggle) и управление (get/set)
local OverlayToggle = UI:AddToggle({
	Name = "Screen Overlay", -- название переключателя
	Default = false, -- изначальное состояние (тут выключено)
	Option = true, -- включает доп. меню справа (появляется иконка шестеренки)
	Risky = true, -- красит текст в оранжевый (типо важная или опасная функция, юзайте как вам угодно)
	Callback = function(state) -- возвращает true/false при клике
		print("Overlay state:", state)
	end
})

-- закидываем доп. настройки ВНУТРЬ тоггла (в шестеренку).
-- ВАЖНО: всегда чекайте наличие .Option перед добавлением
if OverlayToggle.Option then
	OverlayToggle.Option:AddButton({
		Name = "Force Disable",
		Callback = function()
			-- меняем значение ползунка/тоггла напрямую через метод.
			-- второй аргумент (true) принудительно триггерит Callback самого тоггла
			OverlayToggle:SetValue(false, true)
			-- переименовываем элемент в реальном времени
			OverlayToggle:Rename("Screen Overlay (Off!)")
		end
	})
end

-- 5. слайдеры (int и float)
local FovSlider = UI:AddSlider({
	Name = "Camera FOV",
	Range = {70, 120}, -- задаём лимит: {минимум, максимум}
	Default = 90, -- дефолтное значение ползунка
	Step = 1, -- шаг (int). если 10, то слайдер будет меняться так: 0, 10, 20, 30...
	Type = "°", -- суффикс, добавляется к цифре визуально (например: 90°)
	Callback = function(val) -- возвращает число
	end
})

local StretchSlider = UI:AddSlider({
	Name = "Screen Stretch",
	Range = {0, 1},
	Default = 0.5,
	Precise = 2, -- сколько знаков после запятой (0.50). (используется вместо Step для float-значений)
	Callback = function(val)
	end
})

-- 6. выпадающий список (dropdown)
-- обычный выбор одного пункта
local SkyboxDropdown = UI:AddDropdown({
	Name = "Custom Sky",
	Values = {"Night", "Vaporwave", "Blood Moon"}, -- Список доступных вариантов (массив строк)
	Default = "Night", -- вариант, выбранный по умолчанию (должен быть из списка Values)
	Multi = false, -- если false = можно выбрать только один пункт
	Callback = function(val) -- возвращает строку ("Night")
	end
})

-- мульти-выбор
UI:AddDropdown({
	Name = "Render Filters",
	Values = {"Players", "Corpses", "Map Details"}, 
	Default = { ["Players"] = true, ["Corpses"] = false }, -- для Multi: указываем таблицу состояния пунктов
	Multi = true, -- если true = можно включить несколько пунктов одновременно
	Callback = function(tbl) -- возвращает таблицу состояний: { Players = true, Corpses = false ... }
	end
})

-- 7. цвета и бинды клавиш
local ArrowColor = UI:AddColorPicker({
	Name = "Player Arrows Color",
	Default = Color3.fromRGB(255, 106, 133), -- дефолтный цвет
	Transparency = 0.5, -- дефолтная прозрачность (альфа-канал от 0 до 1)
	Callback = function(color, alpha) -- возвращает (Color3, number)
	end
})

local CameraStrafeKey = UI:AddKeybind({
	Name = "Camera Strafe Key",
	Default = Enum.KeyCode.C, -- кнопка по умолчанию (можно юзать строки, например "C")
	Callback = function(key) -- возвращает название нажатой клавиши
	end
})

-- 8. кнопки и система уведомлений
UI:AddButton({
	Name = "Apply Visuals", -- текст на кнопке
	Callback = function() -- срабатывает при каждом клике по кнопку
		Vantality.Notify({
			Title = "Visuals Loaded", -- заголовок уведомления
			Content = "визуалы применились", -- текст уведомления
			Icon = "check-circle", -- название иконки из библиотеки (см. раздел Icons)
			Duration = 3 -- сколько секунд висит на экране
		})
	end
})

-- 9. ЛОГИКА (ГЛАВНЫЙ ЦИКЛ)
-- юзаем :GetValue(), чтобы не срать глобальными переменными в коде скрипта.

Vantality.Bind(game:GetService("RunService").RenderStepped, function(dt)
	-- читаем актуальное состояние элементов напрямую
	if OverlayToggle:GetValue() then
		local sky = SkyboxDropdown:GetValue()
		local fov = FovSlider:GetValue()

		-- колорпикер возвращает таблицу (цвет + прозрачность)
		local arrowData = ArrowColor:GetValue()
		local rgb = arrowData.Color
		local alpha = arrowData.Transparency

		-- тут ваша математика под плейс (например, апдейт стрелочек на врагов)
	end
end)

-- 10. ВЫГРУЗКА (CLEANUP)
-- API само отрубит коннекты (Bind) и удалит секцию.
-- НО если вы спавните партиклы, локалпарты (Instance.new) или юзаете Drawing API:
-- ВЫ ОБЯЗАНЫ УДАЛИТЬ ИХ ТУТ САМИ.

-- пример кастомного объекта:
local IndicatorText = Drawing.new("Text")

function OnUnload()
	print(">> script unloaded via API.")

	-- чистим за собой мусор
	if IndicatorText then
		IndicatorText:Remove()
	end

	-- возвращаем стейты игры в исходную
	-- game.Lighting.FogEnd = 100000
end
